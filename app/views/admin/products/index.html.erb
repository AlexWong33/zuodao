<div class="content main admin-products">
  <div class="container-fluid">
    <div class="page-header">
      <h3>商品列表
        <%= link_to(fa_icon("plus", text: "新增"), new_admin_product_path, class: "btn btn-raised btn-success pull-right") %>
      </h3>
    </div>
    <div class="panel panel-default">
      <table class="table table-striped">
        <thead>
          <th>#</th>
          <th>图片</th>
          <th>分类</th>
          <th>名称</th>
          <th>描述</th>
          <th>价格</th>
          <th>库存</th>
          <th>操作</th>
          <th>创建时间</th>
        </thead>
        <tbody>
          <% @products.each_with_index do |product, index| %>
            <tr>
              <td><%= index + 1 %></td>
              <td width="100">
                <%= link_to product_path(product) do %>
                  <%= render_product_image(product, "products-img") %>
                <% end %>
              </td>
              <td><%= product.category.name %></td>
              <td><%= product.title %></td>
              <td><%= render_text(product.description, length: 20) %></td>
              <td><%= render_price(product.price) %></td>
              <td><%= product.quantity %></td>
              <td>
                <%= link_to("编辑", edit_admin_product_path(product), class: "btn btn-raised btn-white btn-xs") %>
                <%= link_to("删除", admin_product_path(product), class: "btn btn-raised btn-danger btn-xs",
                 method: :delete, data: {confirm: "确定删除产品#{product.title}"}) %>
              </td>
              <td><%= render_create_time(product) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="text-center">
      <%= will_paginate @products, renderer: BootstrapPagination::Rails %>
    </div>
  </div>
</div>
